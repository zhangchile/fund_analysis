<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <!-- Load c3.css -->
    <link href="./css/c3.min.css" rel="stylesheet">

    <!-- Load d3.js and c3.js -->
    <script src="./js/d3.v3.min.js" charset="utf-8"></script>
    <script src="./js/c3.min.js"></script>
    <script src="./js/jquery-3.2.1.min.js"></script>
</head>
<body>
    <div id="chart" style="max-width:1000px"></div>
</body>
<script>
var data = [];
var getDate = function () {  
    var date = new Date();
    var y = date.getFullYear();  
    var m = date.getMonth() + 1;  
    m = m < 10 ? '0' + m : m;  
    var d = date.getDate();  
    d = d < 10 ? ('0' + d) : d;  
    return y + '-' + m + '-' + d;  
};

$.get('./funddata/fundcount_'+getDate()+'.json', function (data) {
    console.log(data)


})

data = [{"id": "160222", "name": "\u56fd\u6cf0\u56fd\u8bc1\u98df\u54c1\u996e\u6599\u884c\u4e1a\u6307\u6570\u5206\u7ea7|\u6307\u6570\u578b|zs", "count": 81, "reading": 28742}, {"id": "161725", "name": "\u62db\u5546\u4e2d\u8bc1\u767d\u9152\u6307\u6570\u5206\u7ea7|\u6307\u6570\u578b|zs", "count": 903, "reading": 414254}, {"id": "167301", "name": "\u65b9\u6b63\u5bcc\u90a6\u4fdd\u9669\u4e3b\u9898\u6307\u6570\u5206\u7ea7|\u6307\u6570\u578b|zs", "count": 126, "reading": 44180}, {"id": "001632", "name": "\u5929\u5f18\u4e2d\u8bc1\u98df\u54c1\u996e\u6599\u6307\u6570C|\u6307\u6570\u578b|zs", "count": 32, "reading": 12052}, {"id": "168203", "name": "\u4e2d\u878d\u56fd\u8bc1\u94a2\u94c1\u884c\u4e1a\u6307\u6570\u5206\u7ea7|\u6307\u6570\u578b|zs", "count": 41, "reading": 69936}, {"id": "502023", "name": "\u9e4f\u534e\u94a2\u94c1\u5206\u7ea7|\u6307\u6570\u578b|zs", "count": 69, "reading": 149597}, {"id": "161724", "name": "\u62db\u5546\u4e2d\u8bc1\u7164\u70ad\u7b49\u6743\u6307\u6570\u5206\u7ea7|\u6307\u6570\u578b|zs", "count": 60, "reading": 31007}, {"id": "002907", "name": "\u5357\u65b9\u4e2d\u8bc1500\u91cf\u5316\u589e\u5f3aC|\u6307\u6570\u578b|zs", "count": 49, "reading": 171892}, {"id": "519772", "name": "\u4ea4\u94f6\u65b0\u751f\u6d3b\u529b\u7075\u6d3b\u914d\u7f6e\u6df7\u5408|\u6df7\u5408\u578b|hh", "count": 44, "reading": 53773}, {"id": "002124", "name": "\u5e7f\u53d1\u65b0\u5174\u4ea7\u4e1a\u6df7\u5408|\u6df7\u5408\u578b|hh", "count": 147, "reading": 148127}, {"id": "340007", "name": "\u5174\u5168\u793e\u4f1a\u8d23\u4efb\u6df7\u5408|\u6df7\u5408\u578b|hh", "count": 70, "reading": 225428}, {"id": "002803", "name": "\u4e1c\u65b9\u7ea2\u6caa\u6e2f\u6df1\u6df7\u5408|\u6df7\u5408\u578b|hh", "count": 96, "reading": 154197}, {"id": "340008", "name": "\u5174\u5168\u6709\u673a\u589e\u957f\u6df7\u5408|\u6df7\u5408\u578b|hh", "count": 32, "reading": 24020}, {"id": "040008", "name": "\u534e\u5b89\u7b56\u7565\u4f18\u9009\u6df7\u5408|\u6df7\u5408\u578b|hh", "count": 69, "reading": 125690}, {"id": "020026", "name": "\u56fd\u6cf0\u6210\u957f\u4f18\u9009\u6df7\u5408|\u6df7\u5408\u578b|hh", "count": 100, "reading": 88831}, {"id": "001740", "name": "\u5149\u5927\u4e2d\u56fd\u5236\u90202025\u6df7\u5408|\u6df7\u5408\u578b|hh", "count": 77, "reading": 384706}, {"id": "519961", "name": "\u957f\u4fe1\u5229\u5e7f\u6df7\u5408A|\u6df7\u5408\u578b|hh", "count": 41, "reading": 13591}, {"id": "004142", "name": "\u62db\u5546\u76db\u5408\u7075\u6d3b\u6df7\u5408A|\u6df7\u5408\u578b|hh", "count": 44, "reading": 60742}]

    var chart = c3.generate({
        bindto: '#chart',
        data: {
            json: data,
            keys: {
                x: 'name',
                value:['count','reading']
            },
            axes: {
                reading: 'y2' // ADD
            }
        },
        axis: {
            x: {
                type: 'category'
            },
            y2: {
                show: true, // ADD
                label: '阅读量'
            }
        },
        tooltip: {
            format: {
                name: function (name, ratio, id, index) {
                    if (id == 'count') {
                        return '评论量';
                    } else {
                        return '阅读量';
                    }
                }
            }
        }
    });
</script>
</html>